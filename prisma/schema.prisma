generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider             = "postgres"
  url                  = env("DATABASE_URL")
}

// --------------------------------------

enum JobType {
  PART_TIME
  FULL_TIME
}

enum Tag {
  Marketing
  Graphic_Design
  Education
  Programming
  Communication
  Charity
}

enum Role {
  ADMINISTRATOR
  EMPLOYER
  INTERN
  STANDARD
}

enum Status {
  APPLIED
  REJECTED
  HIRED
}

// --------------------------------------

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  role      Role
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Company {
  id          Int      @id @default(autoincrement())
  userId      Int      @unique
  name        String   @unique @db.VarChar(100)
  description String   @db.VarChar(1000)
  logo        String?  @db.VarChar(2000)
  website     String?  @db.VarChar(50)
  jobs        Job[]
  email       String   @unique
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Intern {
  id              Int              @id @default(autoincrement())
  userId          Int              @unique
  bio             String           @db.VarChar(1000)
  interests       String[]
  jobApplications JobApplication[]
  email           String           @unique @db.VarChar(100)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
}

// --------------------------------------

model JobApplication {
  id          Int      @id @default(autoincrement())
  description String   @db.VarChar(200)
  status      Status
  internId    Int
  intern      Intern   @relation(fields: [internId], references: [id])
  jobId       Int
  job         Job      @relation(fields: [jobId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Job {
  id             Int              @id @default(autoincrement())
  position       String           @db.VarChar(50)
  description    String           @db.VarChar(1000)
  jobType        JobType
  skillsRequired String[]
  numOfOpenings  Int              @default(1)
  duration       String           @db.VarChar(100)
  postedAt       DateTime         @default(now())
  location       String           @default("Remote") @db.VarChar(100)
  salary         String?          @db.VarChar(100)
  industry       Tag
  closed         Boolean          @default(false)
  applications   JobApplication[]

  companyId   Int
  companyName String
  company     Company @relation(fields: [companyId], references: [id])

  updatedAt DateTime @updatedAt
}
